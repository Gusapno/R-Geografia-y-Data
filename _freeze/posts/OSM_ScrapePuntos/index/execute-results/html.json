{
  "hash": "cd99ad3c4a973054a6baee8074b04231",
  "result": {
    "markdown": "---\ntitle: \"Webscrape de puntos de Open Street Map (OSM)\"\nauthor: \"Gabriel Ramírez\"\ndate: \"04/02/2022\"\nlang: es\neditor: visual\ncsl: apa.csl\nbibliography: references.bib\ncategories: [SIG]\nimage: \"image.jpg\"\n---\n\n\n# Obtención de datos de Open Street Map (OSM) mediante webscraping\n\nOpen Street Map (OSM) es una base de datos geográfica gratis que es actualizada y mantenida de forma colaborativa. Estos datos son capturados con dispositivos GPS, ortofotografías y otras fuentes libres. Se distribuyen bajo la Licencia Abierta de Bases de Datos (ODbL). Esta licencia permite a los usuarios usar, compartir y modificar libremente la base de datos de forma que se mantiene la misma libertad para los demás.\n\nEn la página web de [Open Street Map](openstreetmap.org) es posible buscar la ubicación de Instituciones. En este caso interesa conocer la ubicación de cada Municipalidad en los ochenta y dos cantones del Costa Rica. Para lograr esto, se cuenta con la capa de cantones de Costa Rica la cual ofrece la lista de cantones del país.\n\nSe utilizará la librería [RSelenium](https://cran.r-project.org/web/packages/RSelenium/index.html) [@RSelenium] la cual permite manejar un navegador web de forma nativa o remota. Con esta librería es posible automatizar tareas en los navegadores. Para lograr obtener la ubicación de las municipalidades, es posible automatizar la tarea de buscar todas las municipalidades y sus respectivas coordenadas.\n\nEsto también es posible mediante la utilización de la API (Application Programming Interface) pero el soporte en lenguaje R no es muy flexible. Con la librería [`osmdata`](https://cran.r-project.org/web/packages/osmdata/vignettes/osmdata.html) [@osmdata] se pueden obtener datos de la siguiente forma:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(osmdata) # \nlibrary(tidyverse) #\nlibrary(sf) #\nlibrary(kableExtra) #\n# Capa de cantones de Costa Rica, se usará como bounding box\ncant.sp <- sf::read_sf(\"sp/LimiteCantonal5K_.shp\")\n\n# Se transforma a WGS84\nbbox_wgs84 <- st_bbox(st_transform(cant.sp, crs = \"WGS84\"))\n\n# Se extraen los datos con los límites de la capa cant.sp\ndatos_muni <- opq(bbox = bbox_wgs84) %>% # \"Overpass\" query\n                add_osm_feature(key = \"amenity\",\n                        value = 'townhall',\n                        value_exact = F) %>% \n                osmdata_sf()\n\n# Los datos extraídos poseen puntos, polígonos y multipolígonos.\n# en nuestro caso interesan los puntos\npuntos <- datos_muni$osm_points\n\n# Se transforma a UTF-8 ya que posee otra codificación\npuntos <- dplyr::mutate_if(puntos, is.character, \n                           .funs = function(x){return(`Encoding<-`(x, \"UTF-8\"))})\n```\n:::\n\n\nAl revisar los datos, se aprecia que existen muchos valores sin nombre y que algunos de ellos no corresponden a municipalidades. Para observar los registros con nombre se eliminan los que no poseen nombre. Estos son algunos de los resultados:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Se remueven los valores en blanco\ntabla <- dplyr::filter(puntos, grepl(\"\",name))\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"width:30%; margin-left: auto; margin-right: auto;\" class=\"table\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> osm_id </th>\n   <th style=\"text-align:left;\"> name </th>\n   <th style=\"text-align:left;\"> addr.city </th>\n   <th style=\"text-align:left;\"> addr.street </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Concejo Municipal Distrito Paquera </td>\n   <td style=\"text-align:left;\"> Paquera </td>\n   <td style=\"text-align:left;\"> Calle Central </td>\n   <td style=\"text-align:left;\"> townhall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Concejo Municipal Distrito Colorado </td>\n   <td style=\"text-align:left;\"> Colorado </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> townhall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Municipalidad de La Cruz </td>\n   <td style=\"text-align:left;\"> La Cruz </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> townhall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Concejo Municipal Distrito Lepanto </td>\n   <td style=\"text-align:left;\"> Lepanto </td>\n   <td style=\"text-align:left;\"> Vía 21 </td>\n   <td style=\"text-align:left;\"> townhall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Concejo Municipal Distrito Cóbano </td>\n   <td style=\"text-align:left;\"> Cóbano </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> townhall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Concejo Municipal Distrito Tucurrique </td>\n   <td style=\"text-align:left;\"> Tucurrique </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> townhall </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nSe aprecia que los resultados no incluyen todas las municipalidades del país. Por su parte los datos de polígonos y multipolígonos si poseen información sobre las municipalidades pero el proceso para obtener una ubicación puntual asociada a cada municipalidad podría ser un poco tedioso. Ante esto, es posible plantear un webscrape con RSelenium en el que se busque cada Municipalidad del país en la página web de OSM y en caso que exista más de un resultado, se utilizaría el más similar a lo deseado. Para evaluar la similitud de un string con otro, se utiliza la librería [stringdist](https://cran.r-project.org/web/packages/stringdist/index.html) [@stringdist] el cual ofrece un puntaje de similitud entre dos strings.\n\nDespués de realizar una búsqueda se aprecia que la localización puntual del elemento es incluída en la estructura de la página, lo cual se puede usar para extraer las coordenadas.\n\n![HTML de la página web](images/Screenshot%202024-04-07%20003033.png){#fig-html fig-align=\"center\"}\n\nEn un resultado de búsqueda, las municipalidades pueden ser denominadas \"Palacio Municipal\" por lo que si no se encuentra similitud con \"Municipalidad de (Cantón)\" se intenta con Palacio Municipal.\n\n# Planteamiento del webscrape con RSelenium\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(stringdist) # Comparar similitud de strings\nlibrary(RSelenium) # RSelenium\nlibrary(tidyverse) # \nlibrary(seleniumPipes) # Implementa W3C webdriver\nlibrary(netstat) # Para el free_port()\n# Empezar el servidor\nrs_driver_object <- rsDriver(browser = 'chrome', # Se utilizará Google Chrome\n                             chromever = 'latest', # Versión de Chrome\n                             verbose = FALSE, # No incluir mensajes de estado\n                             port = free_port(), # Se utiliza un puerto libre\n                             check = TRUE) # Checar si hay nuevas versiones\n\n# crear un objeto cliente\nremDr <- rs_driver_object$client\n\n# Se navega a la página de interés\n\nremDr$navigate('https://www.openstreetmap.org') # \n```\n:::\n\n\nPara poder automatizar la búsqueda de todas las municipalidades es necesario conocer como referirse al cuadro de búsqueda. Al revisar en la página, el xpath completo del cuadro de búsqueda es `/html/body/div/div[1]/div[1]/form[1]/div/div[1]/div/input[1]`, con lo cual se puede interactuar con el mismo de la siguiente forma:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Se asigna el xpath a una variable para simplificar el código\nxpath_cuadro <- \"/html/body/div/div[1]/div[1]/form[1]/div/div[1]/div/input[1]\"\n\n# Se busca en el web driver\ncuadro_busqueda <- remDr$findElement(\"xpath\",xpath_cuadro)\n\n# Se envía texto al elemento pero debe ser en formato lista\ncuadro_busqueda$sendKeysToElement(list(paste0(\"Municipalidad de \",\n                                                cant.sp$canton[1], \" Costa Rica\")))\n\n# El texto se puede limpiar de la siguiente forma:\ncuadro_busqueda$clearElement()\n```\n:::\n\n\nPara realizar la búsqueda se realiza un proceso similar (se identifica el xpath pero se da click en el elemento). También es posible escribir la indicación de click inmediatamente de la siguiente forma:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Se envía texto al elemento pero debe ser en formato lista\ncuadro_busqueda$sendKeysToElement(list(paste0(\"Municipalidad Heredia\")))\n\n# xpath para buscar el elemento\nclick_busqueda <- '//*[@id=\"sidebar\"]/div[1]/form[1]/div/div[1]/div/input[2]'\n\n# Indicaciones para dar click\nremDr$findElement(\"xpath\",click_busqueda)$clickElement()\n```\n:::\n\n\n![](images/Screenshot%202024-04-07%20192634.png){#fig-resultados-busqueda fig-align=\"center\"}\n\nCon esta búsqueda, se obtienen dos resultados (lo cual varía según el área de búsqueda) pero el resultado deseado es específicamente la \"Municipalidad de Heredia\". Para identificar mediante código el resultado deseado, es posible comparar los resultados obtenidos con el resultado deseado.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# xpath para identificar los resultados visibles\nresultados_busqueda <- \"/html/body/div/div[1]/div[5]/div[2]/ul/li/a\"\n\n# Se utiliza \"findElements\" ya que se desean todos los elementos\ncl_result <- remDr$findElements(\"xpath\",resultados_busqueda)\n```\n:::\n\n\nSe obtiene una lista del tamaño de la cantidad de resultados visibles (podrían ser más si se presiona en More Results). Para acceder al nombre de la municipalidad, separarlo de la dirección y compararlo con lo deseado es posible realizar el siguiente procedimiento:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnombres_resultado <- data.frame(matrix(nrow = 0, ncol = 3))\ncolnames(nombres_resultado) <- c(\"Nombre_completo\",\"Nombre\",\"Similitud\")\nfor (i in 1:length(cl_result)) {\n  # Se añade al dataframe\n  nombres_resultado[i,1] <- as.character(cl_result[[i]]$getElementText())\n  \n  \n  # Se divide por la coma y se selecciona el primer resultado\n  nombres_resultado[i,2] <- str_split(nombres_resultado[i,1],\",\")[[1]][1]\n\n  # Similitud\n  nombres_resultado[i,3] <- stringsim(\"Municipalidad Heredia\",nombres_resultado[i,2])\n}\n```\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"width:30%; margin-left: auto; margin-right: auto;\" class=\"table\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> X </th>\n   <th style=\"text-align:left;\"> Nombre_completo </th>\n   <th style=\"text-align:left;\"> Nombre </th>\n   <th style=\"text-align:right;\"> Similitud </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> Municipalidad de Barva, Calle 2 Nicolás Aguilar, El Calvario, Barva, Cantón Barva, Heredia Province, 40201, Costa Rica </td>\n   <td style=\"text-align:left;\"> Municipalidad de Barva </td>\n   <td style=\"text-align:right;\"> 0.7272727 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> Municipalidad de San Rafael, Calle 35, La Terraza, San Rafael, Cantón San Rafael, Heredia Province, 40501, Costa Rica </td>\n   <td style=\"text-align:left;\"> Municipalidad de San Rafael </td>\n   <td style=\"text-align:right;\"> 0.5925926 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> Municipalidad de Heredia, Avenida Central Paseo de la Cultura, Oriente, Corazón de Jesús, Heredia, Cantón Heredia, Heredia Province, 40101, Costa Rica </td>\n   <td style=\"text-align:left;\"> Municipalidad de Heredia </td>\n   <td style=\"text-align:right;\"> 0.8750000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:left;\"> Municipalidad de San Isidro, Calle Central, Cristo Rey, San Isidro, Cantón San Isidro, Heredia Province, 40601, Costa Rica </td>\n   <td style=\"text-align:left;\"> Municipalidad de San Isidro </td>\n   <td style=\"text-align:right;\"> 0.5925926 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:left;\"> Municipalidad de Belén, Calle 152, San Vicente, San Antonio, Cantón Belén, Heredia Province, 40701, Costa Rica </td>\n   <td style=\"text-align:left;\"> Municipalidad de Belén </td>\n   <td style=\"text-align:right;\"> 0.7272727 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:left;\"> Municipalidad de Santo Domingo, Calle Central, Santo Domingo, Cantón San Pablo, Heredia Province, 40901, Costa Rica </td>\n   <td style=\"text-align:left;\"> Municipalidad de Santo Domingo </td>\n   <td style=\"text-align:right;\"> 0.5333333 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nSe aprecia que el tercer resultado es el que posee mayor similitud con el string deseado, por tanto la información se extraería del mismo. Ya que se identificó el resultado deseado, es posible explorar como obtener las coordenadas del mismo. Para esto al revisar @fig-html se aprecia que existe un atributo asociado a las coordenadas del elemento de búsqueda asociado. Para extraer las coordenadas, se puede realizar el siguiente procedimiento:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Para saber cual es el de mayor similitud\nres_similar <- as.numeric(which(tolower(nombres_resultado$Similitud) > 0.85))\n\n\n# Se encuentra la coordenada y se muestra\nlon <- cl_result[[res_similar]]$getElementAttribute(\"data-lon\")[[1]]\n  \n# Se encuentra la coordenada y se muestra\nlat <- cl_result[[res_similar]]$getElementAttribute(\"data-lat\")[[1]]\n\nprint(paste(\"La longitud de la Municipalidad de Heredia es\",lon))\nprint(paste(\"La latitud de la Municipalidad de Heredia es\",lat))\n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"La longitud de la Municipalidad de Heredia es -84.1162254\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"La latitud de la Municipalidad de Heredia es 9.9989845\"\n```\n:::\n:::\n\n\nCon esto es posible iterar por todos los nombres de cantón y guardar las coordenadas para cada municipalidad. Se plantea de la siguiente manera:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Nombre de columna para la tabla de salida\nncol_municipalidades <- c(\"Canton\",\"Nombre\",\"Tipo\",\"X\",\"Y\")\n\n# Dataframe con cantidad de nombre de columna igual a ncol_municipalidades\ndf <- data.frame(matrix(nrow = 0, ncol = length(ncol_municipalidades)))\n\n# Se asignan los nombres de columna\ncolnames(df) <- ncol_municipalidades\n\n# Se asignan xpath para evitar ruido en el código\ncuadro_busqueda <- '/html/body/div/div[1]/div[1]/form[1]/div/div[1]/div/input[1]'\nclick_busqueda <- '//*[@id=\"sidebar\"]/div[1]/form[1]/div/div[1]/div/input[2]'\nresultados_busqueda <- \"/html/body/div/div[1]/div[5]/div[2]/ul/li/a\"\n\n# La iteración va de 1 al número de cantones (82)\nfor (i in 1:length(cant.sp$canton)) {\n  \n  rm(r)\n  # Limpiar el cuadro de búsqueea\n  remDr$findElement(\"xpath\",cuadro_busqueda)$clearElement()\n  \n  # Se selecciona el cuadro de busqueda\n  busqueda <- remDr$findElement(\"xpath\",cuadro_busqueda)\n  \n  # Se envía el texto al cuadro de texto\n  busqueda$sendKeysToElement(list(paste0(\"Municipalidad de \", \n                                                cant.sp$canton[i], \" Costa Rica\")))\n  \n  # Se da click al botón de buscar\n  remDr$findElement(\"xpath\",click_busqueda)$clickElement()\n  \n  Sys.sleep(3)\n\n  ## Se revisa si el texto de \"Resultados\" está presente \n  ## Lo cual es indicador de que hubo más de un resultado\n  try(assign(\"r\",length(remDr$findElements(\"xpath\",resultados_busqueda))),silent = T)\n  \n  # Si \"r\" es igual a 0 se borra (ya que no hubieron mas resultados)\n  Sys.sleep(5)\n  # el string deseado\n  if(r < 2L){\n    rm(r)\n    resultado_similar <- 1\n    cl_result <- remDr$findElements(\"xpath\",resultados_busqueda)\n    }\n  if (exists(\"r\") == TRUE) {\n    # Cantidad de resultados\n    a <- as.numeric(r)\n    \n    # Variable para clickear\n    cl_result <- remDr$findElements(\"xpath\",resultados_busqueda)\n    \n    # Se crea una tabla\n    lista_resultados <- data.frame(matrix(nrow = 0, ncol = 4))\n    colnames(lista_resultados) <- c(\"Resultado_Completo\",\"Tipo\",\"Resultado_Split\",\"Score\")\n    for (it_result in 1:r) {\n\n      # Se itera sobre la tabla creada para añadirle los resultados\n      lista_resultados[it_result,1] <- unlist(cl_result[[it_result]]$getElementText())\n      lista_resultados[it_result,2] <- cl_result[[it_result]]$getElementAttribute(\"data-prefix\")[[1]]\n      lista_resultados[it_result,3] <- str_split(lista_resultados[it_result,1],\",\")[[1]][1]\n      # Este string puede mejorar\n      lista_resultados[it_result,4] <- stringsim(paste0(\"Municipalidad \",cant.sp$canton[i]),\n                                          lista_resultados[it_result,3])\n    }\n    # Si el puntaje de similitud es mayor a 0.85 se procede\n    if (max(lista_resultados$Score) > 0.85) {\n    # Se busca la palabra similar\n    resultado_similar <- as.numeric(which(tolower(lista_resultados$Score) > 0.85 &\n                                            lista_resultados$Tipo == \"Town Hall\"))[[1]]\n    }\n    # Si el puntaje de similitud es menor a 0.85 se procede\n    if (max(lista_resultados$Score) < 0.85) {\n    # Se busca el resultado Palacio Municipal\n    resultado_similar <- which(grepl(\"palacio municipal\",\n                                    tolower(lista_resultados$Resultado)) == TRUE)\n    }\n  }\n  # Se añade el nombre del cantón\n  df[i,1] <- cant.sp$canton[i]\n  \n  # Dirección\n  df[i,2] <- unlist(cl_result[[resultado_similar]]$getElementText())\n  \n  # Tipo\n  df[i,3] <- cl_result[[resultado_similar]]$getElementAttribute(\"data-prefix\")[[1]]\n  \n  # Se añade la coordenada\n  df[i,4] <- cl_result[[resultado_similar]]$getElementAttribute(\"data-lon\")[[1]]\n  \n  # Se añade la coordenada\n  df[i,5] <- cl_result[[resultado_similar]]$getElementAttribute(\"data-lat\")[[1]]\n  \n  print(paste0(\"Iteración \",i,\" Municipalidad del cantón de \", cant.sp$canton[i]))\n}\n\nwrite.csv(df,\"output/csv/Puntos_Municipalidades.csv\")\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n# Visualización de puntos obtenidos\n\nLos resultados obtenido pueden ser plasmados en un mapa para comprobar las ubicaciones. Esto se puede realizar con la librería `leaflet` [@leaflet]. Se configura de forma que al dar click en cada punto es posible ver la dirección asociada al mismo (aunque se puede mostrar otra información pero en este caso se mostrará la dirección).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(leaflet)\nleaflet() %>% addTiles() %>% \n  addCircleMarkers(lng = as.numeric(df$X),\n                   lat = as.numeric(df$Y), popup = df$Nombre)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-ebe112e256a91406e233\" style=\"width:100%;height:464px;\" class=\"leaflet html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-ebe112e256a91406e233\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"http://openstreetmap.org\\\">OpenStreetMap<\\/a> contributors, <a href=\\\"http://creativecommons.org/licenses/by-sa/2.0/\\\">CC-BY-SA<\\/a>\"}]},{\"method\":\"addCircleMarkers\",\"args\":[[9.4313011,8.9787376,9.3730051,9.5293179,9.6588391,9.6533286,9.8474914,9.8392836,8.6490816,8.625428,8.8200104,9.1727709,9.6254121,9.6099467,9.6836891,9.8627578,9.8988373,9.7990851,9.9083746,9.8453066,9.8649524,9.9766004,9.8932479,9.9065681,9.916119,9.8687632,9.9033714,9.9921702,9.9083058,9.9157082,9.9111368,9.9314192,9.9205608,9.9164333,9.933115,9.9951323,9.9332302,9.9454901,9.9625138,9.9357862,10.1418239,9.9794189,10.017275,9.9609623,9.9916759,9.9766492,9.9805793,9.9792162,9.9947803,10.0879097,9.9989845,10.0588739,10.0029246,10.0141245,10.0204734,10.0163374,10.0374418,10.0563598,10.0768707,10.0734221,10.0975154,10.0918813,10.0892557,10.0984019,10.0767448,10.2688335,10.1849558,10.2089207,10.2815454,10.2029127,10.3225271,10.4269051,10.4714406,10.4500138,10.4468764,10.3462149,10.5263698,10.6702022,11.0305628,10.6305165,10.8989493,11.0741161],[-84.1625859,-83.5326761,-83.7027928,-84.3620995,-84.0217673,-83.969649,-84.3144733,-83.8657837,-82.9417679,-83.1538376,-82.9702222,-83.3356079,-82.8512749,-84.6220874,-84.0418109,-84.093278,-84.0651069,-84.1614287,-84.441089,-83.9388298,-83.9206174,-84.8363739,-83.7464017,-83.6838138,-84.2425464,-83.9042933,-84.1002972,-83.033404,-83.9852255,-84.0356256,-84.5239488,-84.0947618,-84.1401695,-83.8107725,-84.1811359,-85.251632,-84.0526443,-84.0564446,-84.07847,-84.5227677,-85.4537856,-84.3804411,-84.2102523,-84.0476161,-84.6677694,-84.0074502,-84.0912337,-84.1853459,-84.0982371,-84.4703381,-84.1162254,-85.4178646,-84.1520906,-84.1000717,-84.1249174,-84.0552705,-84.1597384,-84.4334521,-84.2452944,-84.3120071,-84.3781496,-84.729126,-84.3482451,-83.5057025,-83.2895739,-85.5710831,-84.3924786,-83.6817057,-84.9578056,-83.7891709,-84.4307648,-85.0917943,-84.9690782,-84.0134593,-85.5517098,-84.2135451,-85.2553833,-84.8214634,-84.7172541,-85.438814,-85.0148108,-85.6344879],10,null,null,{\"interactive\":true,\"className\":\"\",\"stroke\":true,\"color\":\"#03F\",\"weight\":5,\"opacity\":0.5,\"fill\":true,\"fillColor\":\"#03F\",\"fillOpacity\":0.2},null,null,[\"Municipalidad de Quepos, Calle Central, Los Ángeles, El Cerro, Quepos, Cantón Quepos, Puntarenas Province, 60601, Costa Rica\",\"Municipalidad de Osa, Transversal 3, Montreal, Canadá, Puerto Cortés, Cantón Osa, Puntarenas Province, 60501, Costa Rica\",\"Municipalidad de Pérez Zeledón, Avenida 2, Hospital Viejo, San Isidro de El General, Cantón Pérez Zeledón, San Jose Province, 11901, Costa Rica\",\"Municipalidad de Parrita, Carretera Pacífica Fernández Oreamuno, Buena Nota, Parrita, Cantón Parrita, Puntarenas Province, 60901, Costa Rica\",\"Municipalidad de Tarrazú, Avenida Central, Corea, San Marcos, Cantón Tarrazú, San Jose Province, 10501, Costa Rica\",\"Municipalidad de Dota, Avenida 1, El Invu, Santa María, Cantón Dota, San Jose Province, 11701, Costa Rica\",\"Municipalidad de Puriscal, Avenida 1, Santa Cecilia, Santiago, Cantón Puriscal, San Jose Province, 10401, Costa Rica\",\"Municipalidad de Paraíso, Avenida 0, La Joya, Paraíso, Cantón Paraíso, Cartago Province, 30201, Costa Rica\",\"Municipalidad de Corredores, Avenida 7, San Juan, Neily, Corredor, Cantón Corredores, Puntarenas Province, 61001, Costa Rica\",\"Municipalidad de Golfito, Avenida 1, Pueblo Civil, Golfito, Cantón Golfito, Puntarenas Province, 60701, Costa Rica\",\"Municipalidad de Coto Brus, Vía 613, María Auxiliadora, San Vito, Cantón Coto Brus, Puntarenas Province, 60801, Costa Rica\",\"Municipalidad de Buenos Aires, Avenida 1, San Martín, Buenos Aires, Cantón Buenos Aires, Puntarenas Province, 60301, Costa Rica\",\"Municipalidad de Talamanca, Avenida Central, Cruce de Bribri, Bribri, Bratsi, Cantón Talamanca, Limón Province, 70401, Costa Rica\",\"Municipalidad de Garabito, Avenida Pastor Díaz, Los Cholos, Jacó, Cantón Garabito, Puntarenas Province, 61101, Costa Rica\",\"Municipalidad de León Cortés Castro, Avenida 1, San Francisco, San Pablo, Cantón León Cortés Castro, San Jose Province, 12001, Costa Rica\",\"Municipalidad de Aserrí, Calle 2, Barrio Lomas de Aserrí, Aserrí, Cantón Aserrí, San Jose Province, 10601, Costa Rica\",\"Municipalidad de Desamparados, Calle 2, Palogrande, Desamparados, Cantón Desamparados, San Jose Province, 10301, Costa Rica\",\"Municipalidad de Acosta;Banco de Costa Rica, Avenida 1, Loyola, San Ignacio, Cantón Acosta, San Jose Province, 11201, Costa Rica\",\"Municipalidad de Turrubares, Calle 2, Imas, San Pablo, Cantón Turrubares, San Jose Province, 11601, Costa Rica\",\"Municipalidad de El Guarco, Avenida 48, Victoria, El Tejar, Cantón El Guarco, Cartago Province, 30801, Costa Rica\",\"Municipalidad de Cartago, Avenida Central, Cartago, Oriental, Cantón Cartago, Cartago Province, 30101, Costa Rica\",\"Municipalidad de Puntarenas, Calle 9, Puntarenas, Cantón Puntarenas, Puntarenas Province, 60101, Costa Rica\",\"Municipalidad de Jiménez, Calle 2, Santa Cecilia, Juan Viñas, Cantón Jiménez, Cartago Province, 30401, Costa Rica\",\"Municipalidad de Turrialba, Calle 1, Cabiria, Turrialba, Cantón Turrialba, Cartago Province, 30501, Costa Rica\",\"Municipalidad de Mora, Calle 4, Michoacán, Colón, Cantón Mora, San Jose Province, 10701, Costa Rica\",\"Municipalidad de Oreamuno, Avenida 9A, Barreal, San Rafael, Cantón Oreamuno, Cartago Province, 30701, Costa Rica\",\"Municipalidad de Alajuelita, Avenida 68, Mojados, Alajuelita, Cantón San José, San Jose Province, 10111, Costa Rica\",\"Municipalidad de Limón, Calle 8, Bella Vista, Limón, Cantón Limón, Limón Province, 70101, Costa Rica\",\"Municipalidad de La Unión, Avenida Central, Fátima, Tres Ríos, Cantón La Unión, Cartago Province, 30301, Costa Rica\",\"Municipalidad de Curridabat, Calle 93, El Dorado, Curridabat, Cantón Curridabat, San Jose Province, 11801, Costa Rica\",\"Municipalidad de Orotina, Avenida Central, El Molino, Orotina, Cantón Orotina, Alajuela Province, 20901, Costa Rica\",\"Municipalidad de San José, 0227, Avenida 10 San Martín, Silos, San José, Hospital, Cantón San José, San Jose Province, 10103, Costa Rica\",\"Municipalidad de Escazú, Calle 134, Faroles, Escazú, Cantón Escazú, San Jose Province, 10201, Costa Rica\",\"Municipalidad de Alvarado, Calle 6, Lourdes, Pacayas, Cantón Alvarado, Cartago Province, 30601, Costa Rica\",\"Municipalidad de Santa Ana, Calle Central, Barrio Obando, Santa Ana, Cantón Santa Ana, San Jose Province, 10901, Costa Rica\",\"Municipalidad de Nandayure, Calle 1, Bello Horizonte, Carmona, Cantón Nandayure, Provincia Guanacaste, 50901, Costa Rica\",\"Municipalidad de Montes de Oca, Avenida 1, Roosevelt, San Pedro, Cantón Montes de Oca, San Jose Province, 11501, Costa Rica\",\"Municipalidad de Goicoechea, Avenida 31, La Maravilla, Guadalupe, Cantón Goicoechea, San Jose Province, 10801, Costa Rica\",\"Municipalidad de Tibás, Avenida 63, Las Rosas, San Juan, Cantón Tibás, San Jose Province, 11301, Costa Rica\",\"Municipalidad de San Mateo, Calle 2, Barrio Corazón de Jesús, San Mateo, Cantón San Mateo, Alajuela Province, 20401, Costa Rica\",\"Municipalidad de Nicoya, Avenida 2, Nicoya, Cantón Nicoya, Provincia Guanacaste, 50201, Costa Rica\",\"Municipalidad de Atenas, Calle Central Doctor Julio César Ovares, Santa Cecilia, Atenas, Cantón Atenas, Alajuela Province, 20501, Costa Rica\",\"Municipalidad de Alajuela, Avenida Central Juan Manuel López del Corral, Arroyo, Alajuela, Cantón Alajuela, Alajuela Province, 20101, Costa Rica\",\"Municipalidad de Moravia, Avenida 63, Saprissa, San Vicente, Cantón Moravia, San Jose Province, 11401, Costa Rica\",\"Municipalidad de Esparza, Calle 2, La Riviera, Esparza, Espíritu Santo, Cantón Esparza, Puntarenas Province, 60201, Costa Rica\",\"Municipalidad de Vázquez de Coronado, Avenida 93, Los Álamos, San Isidro, Cantón Vázquez de Coronado, San Jose Province, 11101, Costa Rica\",\"Municipalidad de Santo Domingo, Calle Central, Santo Domingo, Cantón San Pablo, Heredia Province, 40901, Costa Rica\",\"Municipalidad de Belén, Calle 152, San Vicente, San Antonio, Cantón Belén, Heredia Province, 40701, Costa Rica\",\"Municipalidad de San Pablo, Avenida 4, San Pablo, Cantón San Pablo, Heredia Province, 40901, Costa Rica\",\"Municipalidad de San Ramón, Calle 1A, San José, San Ramón, Cantón San Ramón, Alajuela Province, 20201, Costa Rica\",\"Municipalidad de Heredia, Avenida Central Paseo de la Cultura, Oriente, Corazón de Jesús, Heredia, Cantón Heredia, Heredia Province, 40101, Costa Rica\",\"Municipalidad de Hojancha, Avenida 1, Barrio La Gran Vía, Hojancha, Cantón Hojancha, Provincia Guanacaste, 51101, Costa Rica\",\"Municipalidad de Flores, Avenida Central, Santa Marta, San Joaquín, Cantón Flores, Heredia Province, 40801, Costa Rica\",\"Municipalidad de San Rafael, Calle 35, La Terraza, San Rafael, Cantón San Rafael, Heredia Province, 40501, Costa Rica\",\"Municipalidad de Barva, Calle 2 Nicolás Aguilar, El Calvario, Barva, Cantón Barva, Heredia Province, 40201, Costa Rica\",\"Municipalidad de San Isidro, Calle Central, Cristo Rey, San Isidro, Cantón San Isidro, Heredia Province, 40601, Costa Rica\",\"Municipalidad de Santa Bárbara, Calle 2, Tropezón, Santa Bárbara, Cantón Santa Bárbara, Heredia Province, 40401, Costa Rica\",\"Municipalidad de Palmares, Calle Central, El Carmen, Palmares, Cantón Palmares, Alajuela Province, 20701, Costa Rica\",\"Municipalidad de Poás, Avenida Central, Los Ángeles, San Pedro, Cantón Poás, Alajuela Province, 20801, Costa Rica\",\"Municipalidad de Grecia, Calle 2 Lucas Fernández, Chavarría, Jiménez, Grecia, Cantón Grecia, Alajuela Province, 20301, Costa Rica\",\"Municipalidad de Naranjo, Avenida Central, Caña Dura, Naranjo, Cantón Naranjo, Alajuela Province, 20601, Costa Rica\",\"Municipalidad de Montes de Oro, Calle 1, Lidio Blanco, Miramar, Cantón Montes de Oro, Puntarenas Province, 60401, Costa Rica\",\"Municipalidad de Sarchí, Calle 2, Sam Pérez 1, Sarchí Norte, Cantón Sarchí, Alajuela Province, 21201, Costa Rica\",\"Municipalidad de Siquirres, Calle 2, El Triunfo, Siquirres, Cantón Siquirres, Limón Province, 70301, Costa Rica\",\"Municipalidad de Matina, Calle 1, Matinita, Matina, Cantón Matina, Limón Province, 70501, Costa Rica\",\"Municipalidad de Santa Cruz, Corredor Chorotega, Tamarindo, Santa Cruz, Cantón Santa Cruz, Provincia Guanacaste, 50301, Costa Rica\",\"Municipalidad de Zarcero, Avenida Central, San Pablo, Zarcero, Cantón Zarcero, Alajuela Province, 21101, Costa Rica\",\"Municipalidad de Guácimo, Calle 1, Barrio Corazón de Jesús, Guácimo, Cantón Guácimo, Limón Province, 70601, Costa Rica\",\"Municipalidad de Abangares, Avenida 1, El Invu, Las Juntas, Cantón Abangares, Provincia Guanacaste, 50701, Costa Rica\",\"Municipalidad de Pococí, Calle 5, Belén, Guápiles, Cantón Pococí, Limón Province, 70201, Costa Rica\",\"Municipalidad de San Carlos, Avenida 2, La Cruz, Quesada, Cantón San Carlos, Alajuela Province, 21001, Costa Rica\",\"Municipalidad de Cañas, Calle Central, Barrio San Pedro, Cañas, Cantón Cañas, Provincia Guanacaste, 50601, Costa Rica\",\"Municipalidad de Tilarán, Calle 4, El Carmen, Tilarán, Cantón Tilarán, Provincia Guanacaste, 50801, Costa Rica\",\"Municipalidad de Sarapiquí, Corredor Noratlántico, Yure, Puerto Viejo, Cantón Sarapiquí, Heredia Province, 41001, Costa Rica\",\"Municipalidad de Carrillo, Avenida 3, Los Ángeles, Filadelfia, Cantón Carrillo, Provincia Guanacaste, 50501, Costa Rica\",\"Municipalidad de Río Cuarto, Calle Central, Gosen, Río Cuarto, Cantón Río Cuarto, Alajuela Province, 21601, Costa Rica\",\"Municipalidad de Bagaces, Calle 2, Villa Nueva, Bagaces, Cantón Bagaces, Provincia Guanacaste, 50401, Costa Rica\",\"Municipalidad de Guatuso, Avenida 8, Nazareth, San Rafael, Cantón Guatuso, Alajuela Province, 21501, Costa Rica\",\"Municipalidad de Los Chiles, Avenida Central, Pueblo Nuevo, Los Chiles, Cantón Los Chiles, Alajuela Province, 21401, Costa Rica\",\"Municipalidad de Liberia, Calle 2, Los Ángeles, Liberia, Cantón Liberia, Provincia Guanacaste, 50101, Costa Rica\",\"Municipalidad de Upala, Avenida 1, Don Chu, Upala, Cantón Upala, Alajuela Province, 21301, Costa Rica\",\"Municipalidad de La Cruz, Calle Central, Barrio Corazón de Jesús, La Cruz, Cantón La Cruz, Provincia Guanacaste, 51001, Costa Rica\"],null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[8.625428,11.0741161],\"lng\":[-85.6344879,-82.8512749]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/htmlwidgets-1.5.3/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/jquery-1.12.4/jquery.min.js\"></script>\r\n<link href=\"../../site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/leaflet-1.3.1/leaflet.js\"></script>\r\n<link href=\"../../site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/proj4-2.6.2/proj4.min.js\"></script>\r\n<script src=\"../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\r\n<link href=\"../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/leaflet-binding-2.0.4.1/leaflet.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}